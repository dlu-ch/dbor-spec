% SPDX-License-Identifier: CC-BY-4.0
% DBOR specification - Dense Binary Object Representation
% Copyright (C) 2020 Daniel Lutz <dlu-ch@users.noreply.github.com>

\documentclass{dbor-article}

    \pdfsuppresswarningpagegroup=1

    % mathematical symbols and operators
    \newcommand{\e}{\mathrm{e}}
    \DeclareMathOperator{\BitAnd}{AND}
    \DeclareMathOperator{\BitOr}{OR}
    \newcommand{\SetOfIntegers}{\mathbbm{Z}}
    \newcommand{\BinNumber}[1]{\mathrm{#1}_{2}}
    \newcommand{\HexNumber}[1]{\mathrm{#1}_{16}}
    \newcommand{\IntegerInterval}[2]{\{#1 \,\ldots\, #2\}}

    \newcommand{\Concat}{\ensuremath{\lrtimes}}
    \newcommand{\ByteSequence}[1]{\ensuremath{\langle #1 \rangle}}

    \newcommand{\DborSyntaxIdent}[1]{\texttt{#1}}  % TODO remove
    \newcommand{\DborSyntaxIdentRef}[1]{\hyperlink{sec:def:#1}{\DborSyntaxIdent{#1}}}  % TODO remove
        % usage: \DborSyntaxIdentRef{IntegerToken}

    \makeatletter
    \DeclareRobustCommand{\DborSyntaxIdentX}[2]{%  TODO rename
        \@ifstar{%
            \hyperlink{sec:def:#1}{\texttt{#2}}%
        }{%
            \texttt{#2}%
        }%
    }
    \makeatother

    \newcommand{\DborNoneValue}{\DborSyntaxIdentX{NoneValue}{None\-Value}}
    \newcommand{\DborMinusZeroValue}{\DborSyntaxIdentX{MinusZeroValue}{Minus\-Zero\-Value}}
    \newcommand{\DborInfinityValue}{\DborSyntaxIdentX{InfinityValue}{Infinity\-Value}}
    \newcommand{\DborMinusInfinityValue}{\DborSyntaxIdentX{MinusInfinityValue}{Minus\-Infinity\-Value}}
    \newcommand{\DborIntegerValue}{\DborSyntaxIdentX{Integer}{Integer\-Value}}
    \newcommand{\DborBinaryRationalValue}{\DborSyntaxIdentX{BinaryRationalValue}{Binary\-Rational\-Value}}
    \newcommand{\DborDecimalRationalValue}{\DborSyntaxIdentX{DecimalRationalValue}{Decimal\-Rational\-Value}}
    \newcommand{\DborByteStringValue}{\DborSyntaxIdentX{ByteStringValue}{Byte\-String\-Value}}
    \newcommand{\DborUtfEightStringValue}{\DborSyntaxIdentX{Utf8EightStringValue}{Utf8\-String\-Value}}
    \newcommand{\DborSequenceValue}{\DborSyntaxIdentX{SequenceValue}{Sequence\-Value}}
    \newcommand{\DborDictionaryValue}{\DborSyntaxIdentX{DictionaryValue}{Dictionary\-Value}}
    \newcommand{\DborAllocatedValue}{\DborSyntaxIdentX{AllocatedValue}{Allocated\-Value}}

    \newcommand{\DborMinimalToken}{\DborSyntaxIdentX{MinimalToken}{Minimal\-Token}}
    \newcommand{\DborNaturalToken}{\DborSyntaxIdentX{NaturalToken}{Natural\-Token}}
    \newcommand{\DborBinaryRationalToken}{\DborSyntaxIdentX{BinaryRationalToken}{Binary\-Rational\-Token}}
    \newcommand{\DborIntegerToken}{\DborSyntaxIdentX{IntegerToken}{Integer\-Token}}
    \newcommand{\DborPowerOfTenToken}{\DborSyntaxIdentX{PowerOfTenToken}{Power\-Of\-Ten\-Token}}

    % colour coding of bytes sequences
    \newcommand{\DborFirstByte}[2]{\textcolor{#1}{\ensuremath{\bm{\HexNumber{#2}}}}}
    \newcommand{\DborFirstByteNone}[1]{\DborFirstByte{red-std}{#1}}
    \newcommand{\DborFirstByteNumber}[1]{\DborFirstByte{black}{#1}}
        % IntegerValue, BinaryRationalValue, DecimalRationalValue, MinusZero, Infinity, MinusInfinity
    \newcommand{\DborFirstByteString}[1]{\DborFirstByte{green-std}{#1}}
        % ByteStringValue, Utf8StringValue
    \newcommand{\DborFirstByteSequence}[1]{\DborFirstByte{blue-std}{#1}}
    \newcommand{\DborFirstByteDictionary}[1]{\DborFirstByte{violet-std}{#1}}
    \newcommand{\DborFirstByteAllocated}[1]{\DborFirstByte{gray-std}{#1}}
    \newcommand{\DborNextByte}[1]{\ensuremath{\HexNumber{#1}}}
    \newcommand{\DborNextByteFill}[1]{\textcolor{gray-std}{\ensuremath{\HexNumber{#1}}}}

    \newenvironment{Note}{\medskip\bgroup\small\ignorespaces}{\par\egroup\smallskip}

    \newcommand{\IncludeImageInPlace}[1]{%
        \begin{quotation}%
            \noindent
            \includegraphics[scale=0.8]{#1}%
        \end{quotation}%
    }

    \newcommand{\DborVersion}{\input{repo_wd_version.tex}}
    \title{DBOR specification \DborVersion}
    \author{Daniel Lutz}

\begin{document}

    \maketitle
    \tableofcontents

    \input{dbor-introduction.tex}
    \input{dbor-values.tex}
    \input{dbor-tokens.tex}
    \input{dbor-implementation.tex}

\end{document}
